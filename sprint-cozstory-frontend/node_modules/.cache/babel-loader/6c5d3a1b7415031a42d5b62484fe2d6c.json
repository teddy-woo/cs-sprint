{"ast":null,"code":"import _asyncToGenerator from\"/home/david_woo/\\uBC14\\uD0D5\\uD654\\uBA74/team3/sprint-cozstory-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/david_woo/\\uBC14\\uD0D5\\uD654\\uBA74/team3/sprint-cozstory-frontend/node_modules/@babel/runtime/regenerator/index.js\";import{Link}from\"react-router-dom\";import useSWR,{useSWRConfig}from\"swr\";import Article from\"./Article\";import Navbar from\"./Navbar\";import ErrorPage from\"./ErrorPage\";import{readAll}from\"./api/read\";import{deleteOne}from\"./api/delete\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function View(){var _useSWR=useSWR('readAll',readAll()),data=_useSWR.data,error=_useSWR.error;var _useSWRConfig=useSWRConfig(),mutate=_useSWRConfig.mutate;var deleteHandler=function deleteHandler(title){return function(id){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.confirm(\"\\uC81C\\uBAA9\\n\".concat(title,\"\\n\\n\\uC774 \\uAE00\\uC744 \\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"))){_context.next=7;break;}_context.next=3;return mutate('create',deleteOne(id));case 3:result=_context.sent;console.log(result);alert('글을 성공적으로 지웠습니다.');readAll()();case 7:case\"end\":return _context.stop();}}},_callee);}));};};if(error)return/*#__PURE__*/_jsx(ErrorPage,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 min-h-screen\",children:[/*#__PURE__*/_jsx(Navbar,{children:/*#__PURE__*/_jsx(Link,{to:\"/new\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-base text-white leading-5 font-semibold bg-indigo-600 rounded-full py-2 px-5 flex items-center space-x-2 hover:bg-indigo-800 dark:highlight-white/5\",children:\"\\uC0C8 \\uAE00 \\uC4F0\\uAE30\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap md:px-12 px-5\",children:[!data?[1,2,3].map(function(i){return/*#__PURE__*/_jsx(Article,{},i);}):data.map(function(_ref2){var _id=_ref2._id,title=_ref2.title,body=_ref2.body,author=_ref2.author,lastUpdated=_ref2.lastUpdated,coverImage=_ref2.coverImage;return/*#__PURE__*/_jsx(Article,{id:_id,title:title,author:(author===null||author===void 0?void 0:author.name)||'익명',lastUpdated:lastUpdated,coverImage:coverImage,deleteHandler:deleteHandler,children:body},_id);}),data&&data.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"group max-w-md mx-auto w-full md:w-9/12 border-gray-300 border-2 border-dashed rounded-xl overflow-hidden md:max-w-screen-lg m-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"md:flex\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-8 grow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"block mt-1 text-lg text-center leading-tight text-gray-400 mb-2\",children:\"\\uC544\\uC9C1 \\uAC8C\\uC2DC\\uBB3C\\uC774 \\uC5C6\\uC5B4\\uC694. \\uC0C8 \\uAE00\\uC744 \\uC4F0\\uB7EC \\uAC00\\uBCFC\\uAE4C\\uC694?\"})})})}):'']})]});}","map":{"version":3,"sources":["/home/david_woo/바탕화면/team3/sprint-cozstory-frontend/src/View.js"],"names":["Link","useSWR","useSWRConfig","Article","Navbar","ErrorPage","readAll","deleteOne","View","data","error","mutate","deleteHandler","title","id","window","confirm","result","console","log","alert","map","i","_id","body","author","lastUpdated","coverImage","name","length"],"mappings":"6TAAA,OAASA,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,EAAiBC,YAAjB,KAAqC,KAArC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,OAASC,OAAT,KAAwB,YAAxB,CACA,OAASC,SAAT,KAA0B,cAA1B,C,wFAEA,cAAe,SAASC,CAAAA,IAAT,EAAgB,CAC7B,YAAwBP,MAAM,CAAC,SAAD,CAAYK,OAAO,EAAnB,CAA9B,CAAQG,IAAR,SAAQA,IAAR,CAAcC,KAAd,SAAcA,KAAd,CACA,kBAAmBR,YAAY,EAA/B,CAAQS,MAAR,eAAQA,MAAR,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,KAAK,QAAI,UAAAC,EAAE,6EAAI,kJAC/BC,MAAM,CAACC,OAAP,yBAAsBH,KAAtB,8EAD+B,+CAEZF,CAAAA,MAAM,CAAC,QAAD,CAAWJ,SAAS,CAACO,EAAD,CAApB,CAFM,QAE3BG,MAF2B,eAGjCC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EAEAG,KAAK,CAAC,iBAAD,CAAL,CACAd,OAAO,KAN0B,sDAAJ,IAAN,EAA3B,CAUA,GAAII,KAAJ,CAAW,mBAAO,KAAC,SAAD,IAAP,CAEX,mBACE,aAAK,SAAS,CAAC,0BAAf,wBACE,KAAC,MAAD,wBACE,KAAC,IAAD,EAAM,EAAE,CAAC,MAAT,uBACE,aAAM,SAAS,CAAC,0JAAhB,wCADF,EADF,EADF,cAOE,aAAK,SAAS,CAAC,8BAAf,WACG,CAACD,IAAD,CACC,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,EAAQY,GAAR,CAAY,SAAAC,CAAC,qBAAI,KAAC,OAAD,IAAcA,CAAd,CAAJ,EAAb,CADD,CAGCb,IAAI,CAACY,GAAL,CAAS,mBAAGE,CAAAA,GAAH,OAAGA,GAAH,CAAQV,KAAR,OAAQA,KAAR,CAAeW,IAAf,OAAeA,IAAf,CAAqBC,MAArB,OAAqBA,MAArB,CAA6BC,WAA7B,OAA6BA,WAA7B,CAA0CC,UAA1C,OAA0CA,UAA1C,oBACP,KAAC,OAAD,EACY,EAAE,CAAEJ,GADhB,CAEE,KAAK,CAAEV,KAFT,CAGE,MAAM,CAAE,CAAAY,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAEG,IAAR,GAAgB,IAH1B,CAIE,WAAW,CAAEF,WAJf,CAKE,UAAU,CAAEC,UALd,CAME,aAAa,CAAEf,aANjB,UAOGY,IAPH,EACOD,GADP,CADO,EAAT,CAJJ,CAiBGd,IAAI,EAAIA,IAAI,CAACoB,MAAL,GAAgB,CAAxB,cACC,YAAK,SAAS,CAAC,kIAAf,uBACA,YAAK,SAAS,CAAC,SAAf,uBACE,YAAK,SAAS,CAAC,UAAf,uBACE,YAAK,SAAS,CAAC,iEAAf,kIADF,EADF,EADA,EADD,CAQC,EAzBJ,GAPF,GADF,CAqCD","sourcesContent":["import { Link } from \"react-router-dom\";\nimport useSWR, { useSWRConfig } from \"swr\";\nimport Article from \"./Article\";\nimport Navbar from \"./Navbar\";\nimport ErrorPage from \"./ErrorPage\";\nimport { readAll } from \"./api/read\";\nimport { deleteOne } from \"./api/delete\";\n\nexport default function View() {\n  const { data, error } = useSWR('readAll', readAll())\n  const { mutate } = useSWRConfig()\n\n  const deleteHandler = title => id => async () => {\n    if (window.confirm(`제목\\n${title}\\n\\n이 글을 삭제하시겠습니까?`)) {\n      const result = await mutate('create', deleteOne(id))\n      console.log(result)\n\n      alert('글을 성공적으로 지웠습니다.')\n      readAll()()\n    }\n  }\n\n  if (error) return <ErrorPage />\n\n  return (\n    <div className=\"bg-gray-100 min-h-screen\">\n      <Navbar>\n        <Link to=\"/new\">\n          <span className=\"text-base text-white leading-5 font-semibold bg-indigo-600 rounded-full py-2 px-5 flex items-center space-x-2 hover:bg-indigo-800 dark:highlight-white/5\">새 글 쓰기</span>\n        </Link>\n      </Navbar>\n\n      <div className=\"flex flex-wrap md:px-12 px-5\">\n        {!data ?\n          [1,2,3].map(i => <Article key={i} />)\n          :\n          data.map(({ _id, title, body, author, lastUpdated, coverImage }) =>\n            <Article\n              key={_id} id={_id}\n              title={title}\n              author={author?.name || '익명'}\n              lastUpdated={lastUpdated}\n              coverImage={coverImage}\n              deleteHandler={deleteHandler}>\n              {body}\n            </Article>\n          )\n        }\n\n        {data && data.length === 0 ?\n          <div className=\"group max-w-md mx-auto w-full md:w-9/12 border-gray-300 border-2 border-dashed rounded-xl overflow-hidden md:max-w-screen-lg m-6\">\n          <div className=\"md:flex\">\n            <div className=\"p-8 grow\">\n              <div className=\"block mt-1 text-lg text-center leading-tight text-gray-400 mb-2\">아직 게시물이 없어요. 새 글을 쓰러 가볼까요?</div>\n            </div>\n          </div>\n        </div>\n        : ''}\n      </div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}