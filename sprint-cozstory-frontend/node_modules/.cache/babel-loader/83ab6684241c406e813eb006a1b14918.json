{"ast":null,"code":"import _asyncToGenerator from\"/home/david_woo/\\uBC14\\uD0D5\\uD654\\uBA74/team3/sprint-cozstory-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/david_woo/\\uBC14\\uD0D5\\uD654\\uBA74/team3/sprint-cozstory-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/david_woo/\\uBC14\\uD0D5\\uD654\\uBA74/team3/sprint-cozstory-frontend/node_modules/@babel/runtime/regenerator/index.js\";import{Link,useParams,useNavigate}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{useSWRConfig}from\"swr\";import Navbar from\"./Navbar\";import{readOne}from\"./api/read\";import{create}from\"./api/create\";import{update}from\"./api/update\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Write(_ref){var _ref$label=_ref.label,label=_ref$label===void 0?'새 글 쓰기':_ref$label;var params=useParams();var navigate=useNavigate();var _useSWRConfig=useSWRConfig(),mutate=_useSWRConfig.mutate;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];useEffect(function(){if(params.id){readOne(params.id)().then(function(article){setTitle(article.title);setBody(article.body);});}},[params.id]);if(params.id){label='글 수정';}var changeBodyHandler=function changeBodyHandler(e){return setBody(e.target.value);};var changeTitleHandler=function changeTitleHandler(e){return setTitle(e.target.value);};var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,coverImages,_result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!params.id){_context.next=8;break;}_context.next=3;return mutate(\"update-\".concat(params.id),update(params.id,{title:title,body:body,lastUpdated:new Date().toISOString()}));case 3:result=_context.sent;console.log(result);if(result){navigate('/');}_context.next=14;break;case 8:coverImages=['https://images.unsplash.com/photo-1640781966832-cf37029e0fac?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3270&q=80','https://images.unsplash.com/photo-1593642533144-3d62aa4783ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3269&q=80','https://images.unsplash.com/photo-1504711434969-e33886168f5c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3270&q=80'];_context.next=11;return mutate('create',create({author:{name:'김코딩',picture:'https://avatars.githubusercontent.com/u/702622?v=4'},title:title,body:body,coverImage:coverImages[Math.floor(Math.random()*coverImages.length)],lastUpdated:new Date().toISOString()}));case 11:_result=_context.sent;console.log(_result);if(_result){navigate('/');}case 14:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(){return _ref2.apply(this,arguments);};}();if(!title&&params.id){console.log(params.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen\",children:[/*#__PURE__*/_jsx(Navbar,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-base leading-5 font-semibold bg-gray-400/10 rounded-full py-2 px-5 flex items-center space-x-2 hover:bg-gray-400/20 dark:highlight-white/5\",children:\"\\uCDE8\\uC18C\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 auto-rows-auto max-w-md mx-auto md:max-w-screen-lg px-12 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leading-10 text-base font-bold text-gray-500\",children:label}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full font-semibold text-2xl py-2 px-3 placeholder-item\",children:\"...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leading-10 text-base font-bold text-gray-500\",children:\"\\uBCF8\\uBB38\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-96 border-solid border-2 border-gray-300 text-lg py-2 px-3 rounded-xl\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-gray-500 placeholder-item leading-4 w-8/12\",children:\"...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-gray-500 placeholder-item leading-4 w-10/12\",children:\"...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-gray-500 placeholder-item leading-4 w-6/12\",children:\"...\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid place-items-center justify-items-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-base text-white leading-5 font-semibold bg-indigo-600 rounded-full py-2 px-5 items-center space-x-2 hover:bg-indigo-800 disabled:bg-gray-300 dark:highlight-white/5\",disabled:true,children:label})})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen\",children:[/*#__PURE__*/_jsx(Navbar,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-base leading-5 font-semibold bg-gray-400/10 rounded-full py-2 px-5 flex items-center space-x-2 hover:bg-gray-400/20 dark:highlight-white/5\",children:\"\\uCDE8\\uC18C\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 auto-rows-auto max-w-md mx-auto md:max-w-screen-lg px-12 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leading-10 text-base font-bold text-gray-500\",children:label}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"w-full border-solid border-2 border-gray-300 font-semibold text-2xl py-2 px-3 rounded-xl\",placeholder:\"\\uC81C\\uBAA9\",defaultValue:title,onChange:changeTitleHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leading-10 text-base font-bold text-gray-500\",children:\"\\uBCF8\\uBB38\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"h-96 border-solid border-2 border-gray-300 text-lg py-2 px-3 rounded-xl\",placeholder:\"\\uC5EC\\uB7EC\\uBD84\\uC758 \\uC774\\uC57C\\uAE30\\uB97C \\uC801\\uC5B4\\uBCF4\\uC138\\uC694\",defaultValue:body,onChange:changeBodyHandler})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid place-items-center justify-items-center\",children:/*#__PURE__*/_jsx(\"button\",{disabled:title&&body?false:true,className:\"text-base text-white leading-5 font-semibold bg-indigo-600 rounded-full py-2 px-5 items-center space-x-2 hover:bg-indigo-800 disabled:bg-gray-300 dark:highlight-white/5\",onClick:submitHandler,children:label})})]})]});}","map":{"version":3,"sources":["/home/david_woo/바탕화면/team3/sprint-cozstory-frontend/src/Write.js"],"names":["Link","useParams","useNavigate","useEffect","useState","useSWRConfig","Navbar","readOne","create","update","Write","label","params","navigate","mutate","title","setTitle","body","setBody","id","then","article","changeBodyHandler","e","target","value","changeTitleHandler","submitHandler","lastUpdated","Date","toISOString","result","console","log","coverImages","author","name","picture","coverImage","Math","floor","random","length"],"mappings":"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","sourcesContent":["import { Link, useParams, useNavigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { useSWRConfig } from \"swr\";\nimport Navbar from \"./Navbar\";\nimport { readOne } from \"./api/read\";\nimport { create } from \"./api/create\";\nimport { update } from \"./api/update\";\n\nexport default function Write({ label = '새 글 쓰기' }) {\n  const params = useParams()\n  const navigate = useNavigate();\n  const { mutate } = useSWRConfig()\n  const [title, setTitle] = useState('')\n  const [body, setBody] = useState('')\n\n  useEffect(() => {\n    if(params.id) {\n      readOne(params.id)()\n      .then(article => {\n        setTitle(article.title)\n        setBody(article.body)\n      })\n    }\n  }, [params.id])\n\n  if(params.id) {\n    label = '글 수정'\n  }\n\n  const changeBodyHandler = e => setBody(e.target.value)\n  const changeTitleHandler = e => setTitle(e.target.value)\n\n  const submitHandler = async () => {\n\n    if (params.id) {\n      const result = await mutate(`update-${params.id}`, update(params.id, {\n        title,\n        body,\n        lastUpdated: new Date().toISOString()\n      }))\n\n      console.log(result)\n      if (result) {\n        navigate('/')\n      }\n    }\n    else {\n      const coverImages = [\n        'https://images.unsplash.com/photo-1640781966832-cf37029e0fac?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3270&q=80',\n        'https://images.unsplash.com/photo-1593642533144-3d62aa4783ec?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3269&q=80',\n        'https://images.unsplash.com/photo-1504711434969-e33886168f5c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=3270&q=80'\n      ]\n\n      const result = await mutate('create', create({\n        author: {\n          name: '김코딩',\n          picture: 'https://avatars.githubusercontent.com/u/702622?v=4'\n        },\n        title,\n        body,\n        coverImage: coverImages[Math.floor(Math.random() * coverImages.length)],\n        lastUpdated: new Date().toISOString()\n      }))\n\n      console.log(result)\n      if (result) {\n        navigate('/')\n      }\n    }\n  }\n\n  if(!title && params.id) {\n    console.log(params.id)\n    return (<div className=\"min-h-screen\">\n      <Navbar>\n        <Link to=\"/\">\n          <span className=\"text-base leading-5 font-semibold bg-gray-400/10 rounded-full py-2 px-5 flex items-center space-x-2 hover:bg-gray-400/20 dark:highlight-white/5\">취소</span>\n        </Link>\n      </Navbar>\n\n      <div className=\"grid grid-cols-1 gap-4 auto-rows-auto max-w-md mx-auto md:max-w-screen-lg px-12 py-6\">\n        <div className=\"grid\">\n          <div className=\"leading-10 text-base font-bold text-gray-500\">{label}</div>\n          <div className=\"w-full font-semibold text-2xl py-2 px-3 placeholder-item\">...</div>\n        </div>\n        <div className=\"grid\">\n          <div className=\"leading-10 text-base font-bold text-gray-500\">본문</div>\n          <div className=\"h-96 border-solid border-2 border-gray-300 text-lg py-2 px-3 rounded-xl\">\n            <p className=\"mt-3 text-gray-500 placeholder-item leading-4 w-8/12\">...</p>\n            <p className=\"mt-3 text-gray-500 placeholder-item leading-4 w-10/12\">...</p>\n            <p className=\"mt-3 text-gray-500 placeholder-item leading-4 w-6/12\">...</p>\n          </div>\n        </div>\n        <div className=\"grid place-items-center justify-items-center\">\n          <button className=\"text-base text-white leading-5 font-semibold bg-indigo-600 rounded-full py-2 px-5 items-center space-x-2 hover:bg-indigo-800 disabled:bg-gray-300 dark:highlight-white/5\" disabled>\n            {label}\n          </button>\n        </div>\n      </div>\n    </div>)\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      <Navbar>\n        <Link to=\"/\">\n          <span className=\"text-base leading-5 font-semibold bg-gray-400/10 rounded-full py-2 px-5 flex items-center space-x-2 hover:bg-gray-400/20 dark:highlight-white/5\">취소</span>\n        </Link>\n      </Navbar>\n\n      <div className=\"grid grid-cols-1 gap-4 auto-rows-auto max-w-md mx-auto md:max-w-screen-lg px-12 py-6\">\n        <div className=\"grid\">\n          <div className=\"leading-10 text-base font-bold text-gray-500\">{label}</div>\n          <input type=\"text\" className=\"w-full border-solid border-2 border-gray-300 font-semibold text-2xl py-2 px-3 rounded-xl\" placeholder=\"제목\" defaultValue={title} onChange={changeTitleHandler}></input>\n        </div>\n        <div className=\"grid\">\n          <div className=\"leading-10 text-base font-bold text-gray-500\">본문</div>\n          <textarea className=\"h-96 border-solid border-2 border-gray-300 text-lg py-2 px-3 rounded-xl\" placeholder=\"여러분의 이야기를 적어보세요\" defaultValue={body} onChange={changeBodyHandler}></textarea>\n        </div>\n        <div className=\"grid place-items-center justify-items-center\">\n          <button disabled={(title && body) ? false : true} className=\"text-base text-white leading-5 font-semibold bg-indigo-600 rounded-full py-2 px-5 items-center space-x-2 hover:bg-indigo-800 disabled:bg-gray-300 dark:highlight-white/5\" onClick={submitHandler}>\n            {label}\n          </button>\n        </div>\n      </div>\n\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}